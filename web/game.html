<!DOCTYPE html>

<link rel="import" href="board.html">

<polymer-element name="risk-game">
  <template>
    <style>
    </style>

    <section class="container-fluid">
      <!-- TODO: better header -->
      <h1>Risk</h1>
      <div class="row">
        <!-- Risk Board -->
        <risk-board id='board' game="{{ game }}" playerId="{{ playerId }}" mode="{{ mode }}" class="col-md-8"
          on-attack="{{ attack }}"
          on-move="{{ move }}"
          on-selection="{{ selection }}"></risk-board>
        <div class="col-md-4">
          <template if='{{ mode == "select" }}'>
            <div style='text-align: center; padding: 1em;'>
              It's up to you ! Select one of your country to add an army.
            </div>
          </template>
          <template if='{{ mode == "attack" }}'>
            <div style='text-align: center; padding: 1em;'>
              It's up to you ! Select the attack to engage.
            </div>
          </template>
          <template if='{{ mode == "move" }}'>
            <div style='text-align: center; padding: 1em;'>
              It's up to you ! Select the forfication to make.
            </div>
          </template>
          <template if='{{ myLastBattleForMove != null }}'>
            <div style='text-align: center; padding: 1em;'>
              <p>How many armies do you want to move from <strong>{{ myLastBattleForMove.attacker.country }}</strong> to <strong>{{ myLastBattleForMove.defender.country }}</strong>?</p>
              <input type="range" value="{{ armiesToMove | asInteger }}" min="1" max="{{ myLastBattleForMove.attacker.remainingArmies - 1 }}" />
              <button on-click='{{ moveOnConquer }}'>Move {{ armiesToMove }} armies</button>
            </div>
          </template>
          <template if='{{ canStart }}'>
            <div style='text-align: center; padding: 1em;'>
              <button on-click='{{ startGame }}'>Start Game</button>
            </div>
          </template>
          <!-- Players List -->
          <ul id="avatars" class="nav nav-pills nav-stacked navbar-inverse img-rounded">
            <template repeat="{{ player in game.players.values }}">
              <li class="{{ {'active': player.playerId == game.activePlayerId} }}">
                <a>
                  <img src="img/avatars/{{ player.avatar }}.png" class="img-rounded" alt="Avatar">
                  <span><b>{{ player.name }}</b></span>
                  <span class="badge pull-right">
                    <i class="riskicon riskicon-soldier"></i>
                    <i class="riskicon riskicon-soldier"></i>
                    0
                  </span>
                </a>
              </li>
            </template>
          </ul>
          <!-- Game history -->
          <div id="history" class="panel panel-default">
            <div class="panel-heading">
              <h3 class="panel-title">History</h3>
            </div>
            <div class="panel-body pre-scrollable">
              <ul class="list-unstyled">
                <li><img src="img/avatars/kadhafi.png" class="img-rounded" alt="Avatar"> John Lennon joined the game</li>
                <li><img src="img/avatars/kadhafi.png" class="img-rounded" alt="Avatar"> John Lennon placed an army on Eastern Australia</li>
                <li><img src="img/avatars/staline.png" class="img-rounded" alt="Avatar"> Ringo Starr attacked <img src="img/avatars/kadhafi.png" class="img-rounded" alt="Avatar"> John Lennon's Eastern Australia with 3 armies from Western Australia</li>
                <li><img src="img/avatars/staline.png" class="img-rounded" alt="Avatar"> Ringo Starr conquered <img src="img/avatars/kadhafi.png" class="img-rounded" alt="Avatar"> John Lennon's Eastern Australia with 3 armies from Western Australia</li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </section>
  </template>

  <script type="application/dart" src="game.dart"></script>
</polymer-element>

